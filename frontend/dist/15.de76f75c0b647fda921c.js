webpackJsonp([15],{467:function(e,t,i){"use strict";function o(e){i(699)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(572),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);var r=i(701),d=i(18),l=o,u=d(s.a,r.a,!1,l,null,null);t.default=u.exports},483:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={checkNumber:function(e){return e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106||8==e.keyCode||46==e.keyCode||37==e.keyCode||39==e.keyCode||(e.preventDefault(),!1)},isValidUrl:function(e){return/http(s?):\/\/[-\w\.]{3,}\.[A-Za-z]{2,3}/.test(e)},returnVideoBlock:function(e,t){if(e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1){var i="",o=e.split("?");return o.length>1?o.map(function(e){0==e.indexOf("v=")&&(i=e.replace("v=",""))}):i=e.split("/").pop(),"small"==t?'<div class="image" style="background-image: url(https://img.youtube.com/vi/'+i+'/mqdefault.jpg)"></div>':'<div class="image" style="background-image: url(https://img.youtube.com/vi/'+i+'/hqdefault.jpg)"></div>'}},returnVideoLink:function(e){if(e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1){var t="",i=e.split("?");return i.length>1?i.map(function(e){0==e.indexOf("v=")&&(t=e.replace("v=",""))}):t=e.split("/").pop(),"https://www.youtube.com/embed/"+t+"?rel=0&showinfo=0"}return e}}},572:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(6),s=o(a),n=i(7),r=o(n),d=i(10),l=o(d),u=i(22),p=i(183),c=o(p),m=i(483),f=o(m),b=i(86),x=o(b);t.default={name:"user-video",asyncData:function(e){var t=e.store,i=e.route;return t.dispatch("videos/getVideo",{user_id:i.params.id,id:i.params.video})},components:{ModalLayout:x.default},data:function(){return{edit:!1,editText:""}},computed:(0,l.default)({},(0,u.mapState)("profile",["user_profile"]),(0,u.mapState)("user",["user"]),(0,u.mapState)("videos",["single"])),methods:(0,l.default)({},(0,u.mapActions)("videos",["updateVideo"]),{saveAbout:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var i,o;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={about:e.editText},t.next=3,e.updateVideo({data:i,id:e.$route.params.video});case 3:o=t.sent,o.success&&(e.edit=!1,e.editText="");case 5:case"end":return t.stop()}},t,e)}))()},returnLink:function(e){return f.default.returnVideoLink(e)},close:function(){window.history.length<=2?this.$router.push("/user/"+this.$route.params.id):window.sessionStorage?this.$router.push(sessionStorage.getItem("prevUrl")):this.$router.push("/user/"+this.$route.params.id)},returnDate:function(e){var t=new Date(e),i=t.getDate();i=i<10?"0"+i:i;var o=t.getMonth()+1;return o=o<10?"0"+o:o,i+"."+o+"."+t.getFullYear()},returnAva:function(){return c.default.returnAvatarMini(this.user_profile.gender,this.user_profile.src,this.user_profile.image)}})}},699:function(e,t,i){var o=i(700);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(457)("8a9d4c84",o,!0,{})},700:function(e,t,i){t=e.exports=i(456)(!1),t.push([e.i,".video-page{max-width:970px;min-width:970px}.video-page__video{width:100%;border-radius:5px 5px 0 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:500px}.video-page__video .iframe{border-radius:5px 5px 0 0;width:100%;height:500px}.video-page__video .video{border-radius:5px 5px 0 0;width:100%;height:100%}.video-page__about{width:100%;padding:35px 70px 35px 30px}.video-page__about .user-info{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px}.video-page__about .user-info .image{width:40px;height:40px;border-radius:50%}.video-page__about .user-info__block{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin-left:10px}.video-page__about .user-info__block-name{margin-bottom:5px;color:#000}.video-page__about .user-info__block-date{font-size:.75rem;color:#9e9e9e}.video-page__about .about-info{width:100%;position:relative}.video-page__about .about-info__text{line-height:25px;color:#000}.video-page__about .about-info__text .description{font-family:Ubuntu,sans-serif;font-size:.85rem;font-style:italic;color:#b3b3b3}.video-page__about .about-info__edit{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.video-page__about .about-info__edit-textarea{width:100%;padding:10px 15px;border-radius:5px;-webkit-box-shadow:0 5px 8px 2px rgba(0,4,7,.03);box-shadow:0 5px 8px 2px rgba(0,4,7,.03);border:1px solid #e9e9e9;color:#000;margin-bottom:20px;-webkit-transition:all .3s;transition:all .3s;resize:none}.video-page__about .about-info__edit-textarea:focus{border:1px solid #000}.video-page__about .about-info__edit-btns{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.video-page__about .about-info__edit-btns .btn{margin-left:30px}.video-page__about .about-info .edit{position:absolute;top:0;right:-30px}.video-page__comments-list{background:#f9f9f9;width:100%;padding:10px 30px;border-top:1px solid #eee;border-bottom:1px solid #eee}.video-page__comments-list .commentsItem{width:100%;border-bottom:1px solid #eee;padding:20px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.video-page__comments-list .commentsItem-avatar{margin-right:10px;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.video-page__comments-list .commentsItem-avatar .image{width:40px;height:40px;border-radius:50%}.video-page__comments-list .commentsItem-comment{width:100%;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;padding-top:5px}.video-page__comments-list .commentsItem-comment__name{font-size:.75rem;color:#b3b3b3;margin-bottom:5px}.video-page__comments-list .commentsItem-comment__name .date{margin-left:30px}.video-page__comments-list .commentsItem-comment__text{width:100%;color:#000}.video-page__comments-list .commentsItem:last-child{border-bottom:none}.video-page__comments-form{width:100%;padding:35px 100px 20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.video-page__comments-form .inpt{width:100%;padding:10px 15px;border-radius:5px;-webkit-box-shadow:0 5px 8px 2px rgba(0,4,7,.03);box-shadow:0 5px 8px 2px rgba(0,4,7,.03);border:1px solid #e9e9e9;color:#000;font-size:.85rem;-webkit-transition:all .3s;transition:all .3s}.video-page__comments-form .inpt:focus{border:1px solid #000}.video-page__comments-form .btn{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;margin-left:30px}",""])},701:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.single?i("div",[i("modal-layout",{attrs:{bgShow:!0,modalShow:!0},on:{close:function(t){return e.close()}}},[i("div",{staticClass:"modalBlock video-page no-pad"},[i("div",{staticClass:"video-page__video"},[e.single.src&&e.single.video?i("video",{staticClass:"video",attrs:{src:"/api/"+e.single.src+"/"+e.single.video,controls:"",preload:"auto"}}):e._e(),e.single.link?i("iframe",{staticClass:"iframe",attrs:{src:e.returnLink(e.single.link),frameborder:"0"}}):e._e()]),i("div",{staticClass:"video-page__about"},[i("div",{staticClass:"user-info"},[i("img",{staticClass:"image",attrs:{src:e.returnAva()}}),i("div",{staticClass:"user-info__block"},[i("div",{staticClass:"user-info__block-name"},[e._v("\n              "+e._s(e.user_profile.firstname)+" "+e._s(e.user_profile.lastname)+"\n            ")]),i("div",{staticClass:"user-info__block-date"},[e._v("\n              "+e._s(e.returnDate(e.single.date_created))+"\n            ")])])]),i("div",{staticClass:"about-info"},[e.edit?i("div",{staticClass:"about-info__edit"},[i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.editText,expression:"editText",modifiers:{trim:!0}}],staticClass:"about-info__edit-textarea",attrs:{col:"3"},domProps:{value:e.editText},on:{input:function(t){t.target.composing||(e.editText=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("div",{staticClass:"about-info__edit-btns"},[i("button",{staticClass:"btn addNew",on:{click:function(t){e.edit=!1,e.editText=""}}},[e._v("\n                Отмена\n              ")]),i("button",{staticClass:"btn send",on:{click:function(t){return e.saveAbout()}}},[e._v("\n                Сохранить\n              ")])])]):i("div",{staticClass:"about-info__text"},[e.single.about?i("div",[e._v("\n              "+e._s(e.single.about)+"\n            ")]):e.user&&e.user.user_id==e.user_profile.id?i("div",{staticClass:"description"},[e._v("\n              Здесь будет описание к видео\n            ")]):e._e()]),e.edit||e.user_profile.id!=e.user.user_id?e._e():i("a",{staticClass:"edit",attrs:{href:"/edit",title:"Редактировать описание"},on:{click:function(t){t.preventDefault(),e.edit=!0,e.editText=e.single.about}}},[i("img",{attrs:{src:"/img/icons/edit.png"}})])])])])])],1):e._e()},a=[],s={render:o,staticRenderFns:a};t.a=s}});